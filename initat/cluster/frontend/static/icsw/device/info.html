<script type="text/ng-template" id="icsw/simple/device/info">
    <icsw-simple-device-info icsw-sel-man="0"></icsw-simple-device-info>
</script>

<script type="text/ng-template" id="icsw/device/network/total">
    <icsw-device-network-total></icsw-device-network-total>
</script>

<script type="text/ng-template" id="icsw/device/livestatus">
    <icsw-device-livestatus icsw-var-name="'$$livestatus_dashboard_pipe'"></icsw-device-livestatus>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.assets">
    <uib-tab-heading>
        Assets{{ addon_text }}
    </uib-tab-heading>
    <uib-tabset>
        <uib-tab>
            <uib-tab-heading>
                <span>Dynamic</span>
            </uib-tab-heading>
            <icsw-device-asset-dynamic-overview-reduced icsw-sel-man="1" icsw-select-device="devicelist[0].idx"></icsw-device-asset-dynamic-overview-reduced>
        </uib-tab>
        <uib-tab>
            <uib-tab-heading>
                <span>Static</span>
            </uib-tab-heading>
            <uib-tabset>
                <uib-tab>
                    <uib-tab-heading>
                        <span>Assignment</span>
                    </uib-tab-heading>
                    <icsw-device-static-asset-overview
                        icsw-device="devicelist[0]"
                    ></icsw-device-static-asset-overview>
                </uib-tab>
                <uib-tab>
                    <uib-tab-heading>
                        <span>Evaluation</span>
                    </uib-tab-heading>
                    <icsw-device-asset-static-overview icsw-sel-man="0" icsw-device="devicelist[0]"></icsw-device-asset-static-overview>
                </uib-tab>
            </uib-tabset>
        </uib-tab>
    </uib-tabset>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.devicelogs">
    <uib-tab-heading>
        Device Logs{{ addon_text }}
    </uib-tab-heading>
    <h3>Device Logs</h3>
    <icsw-device-log-table
        icsw-device-list="devicelist"
        ng-if="active_tab == 'devicelogs'"
        icsw-max-days-per-device="7"
    ></icsw-device-log-table>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.general">
    <uib-tab-heading>
        General{{ addon_text }}
    </uib-tab-heading>
    <icsw-simple-device-info
        icsw-sel-man="{{ popupmode }}"
        icsw-device-list="devicelist"
        ng-if="active_tab == 'general'"
    ></icsw-simple-device-info>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.monitoring">
    <uib-tab-heading>
        Monitoring{{ addon_text_nmd }}
    </uib-tab-heading>
    <icsw-device-monitoring-overview-info
        icsw-sel-man="{{ popupmode }}"
        icsw-device-list="devicelist"
        ng-if="active_tab == 'monitoring'"
    ></icsw-device-monitoring-overview-info>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.network">
    <uib-tab-heading>
        Network{{ addon_text_nmd }}
    </uib-tab-heading>
    <icsw-device-network-overview
        icsw-sel-man="{{ popupmode }}"
        icsw-device-list="devicelist"
        ng-if="active_tab == 'network'"
    ></icsw-device-network-overview>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.config">
    <uib-tab-heading>
        Configuration{{ addon_text }}
    </uib-tab-heading>
    <div
        ng-if="active_tab == 'config'"
    >
        <icsw-device-config-overview icsw-sel-man="{{ popupmode }}" icsw-device-list="devicelist">
        </icsw-device-config-overview>
        <!-- only valid for corvus --> <!-- not functional -->
        <!--icsw-device-configuration-var-overview icsw-sel-man="{{ popupmode }}" icsw-device-list="devicelist">
        </icsw-device-configuration-var-overview-->
    </div>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.location">
    <uib-tab-heading>
        Locations{{ addon_text_nmd }}
    </uib-tab-heading>
    <icsw-device-location-overview
        ng-if="active_tab == 'location'"
        icsw-sel-man="{{ popupmode }}"
        icsw-device-list="devicelist"
    >
    </icsw-device-location-overview>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.variable">
    <uib-tab-heading>
        Device Variables{{ addon_text }}
    </uib-tab-heading>
    <icsw-device-variable-overview
        ng-if="active_tab == 'variable'"
        icsw-sel-man="{{ popupmode }}"
        icsw-device-list="devicelist"
    >
    </icsw-device-variable-overview>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.tab_setup">
    <uib-tab select="activate('$$modify')" index="'$$modify'">
        <uib-tab-heading>
            Tab Configuration <span class="fa fa-wrench"></span>
        </uib-tab-heading>
        <icsw-device-info-tab-modify></icsw-device-info-tab-modify>
    </uib-tab>
</script>

<script type="text/ng-template" id="icsw.device.info.tab.modify">
    <fieldset>
        <legend><h3>Please select active Tabs</h3></legend>
        <div ng-repeat="tab in struct.tab_list" class="form-group row">
            <label class="control-label col-sm-4 icsw-formlabel">
                {{ tab.shownname }}
            </label>
            <div class="controls col-sm-8">
                <icsw-tools-yes-no flag="tab.$$active"/>
            </div>
        </div>
    </fieldset>
    <icsw-tools-button
        type="modify"
        size="sm"
        ng-click="modify_tabs($event)"
        class="pull-right"
    ></icsw-tools-button>
</script>

<script type="text/ng-template" id="icsw.deviceempty.info.form">
    <h3>Details</h3>
    <alert class="alert-warning" style="max-width:500px;">No Devices selected</alert>
</script>

<script type="text/ng-template" id="icsw.device.info.overview">
    <div class="container-fluid">
        <div uib-alert class="alert-warning" ng-if="!struct.data_valid">Fetching Data from Server ...</div>
        <div uib-alert class="alert-warning" ng-if="struct.data_valid && structslist.length == 0">No Devices selected</div>
        <uib-tabset
            ng-if="struct.data_valid && struct.slist.length > 1"
            active="struct.active_tab"
        >
            <uib-tab
                ng-repeat="entry in struct.slist"
                select="activate_tab($event, entry)"
                index="entry.edit_obj.idx"
            >
                <uib-tab-heading>
                    <span ng-show="entry.edit_obj.is_meta_device" class="glyphicon glyphicon-list"></span>
                    <span ng-show="entry.init_called">{{ entry.edit_obj.$$print_name }}</span>
                    <em ng-show="!entry.init_called">{{ entry.edit_obj.$$print_name }}</em>
                    <img ng-if="entry.edit_obj.mon_ext_host" ng-src="{{ entry.edit_obj.$$image_source }}" width="16"></img>
                </uib-tab-heading>
                <icsw-device-info-device icsw-struct="entry"></icsw-device-info-device>
            </uib-tab>
            <uib-tab ng-if="struct.tmd_list.length">
                <uib-tab-heading>
                    <span class="text-danger">{{ struct.tmd_list.length }} not shown</span>
                </uib-tab-heading>
                <h4>Entries not shown</h4>
                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="entry in struct.tmd_list">
                        <icsw-tools-button
                            type="create"
                            size="xs"
                            value="Show device"
                            ng-click="show_device($event, entry)"
                        ></icsw-tools-button>
                        <span ng-show="entry.edit_obj.is_devicegroup" class="glyphicon glyphicon-list"></span>
                        {{ entry.edit_obj.$$print_name }}
                    </li>
                </ul>
            </uib-tab>
        </uib-tabset>
        <icsw-device-info-device ng-if="struct.data_valid && struct.slist.length == 1" icsw-struct="struct.slist[0]"></icsw-device-info-device>
    </div>
</script>

<script type="text/ng-template" id="icsw.device.info.form">
    <fieldset>
        <legend><h3>
            Base Information for '{{ edit_obj.$$print_name }}'
            <img ng-if="edit_obj.mon_ext_host" ng-src="{{ edit_obj.$$image_source }}" width="16" style="margin-left:5px;"></img>
            </h3>
        </legend>
        <div class="form-group row">
            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <label class="control-label col-xs-3 requiredField">
                        FQDN
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.name }}{{ struct.domain_tree.lut[edit_obj.domain_tree_node].node_postfix }}.{{ struct.domain_tree.lut[edit_obj.domain_tree_node].full_name }}
                    </div>
                </div>
                <div class="row" ng-show="edit_obj.alias">
                    <label class="control-label col-xs-3">
                        Alias
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.alias }}
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3">
                        <!-- todo, add some helpfull information via info button -->
                        UUID <!-- <icsw-tools-button size="xs" type="info"></icsw-tools-button> -->
                    </label>
                    <div class="col-xs-9">
                        <code>{{ edit_obj.uuid }}</code>
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3" ng-show="edit_obj.comment">
                        Comment
                    </label>
                    <div class="col-xs-9" ng-show="edit_obj.comment">
                        {{ edit_obj.comment }}
                    </div>
                </div>
                 <div class="row">
                    <label class="control-label col-xs-3">
                        Enabled
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.enabled | yesno1 }}
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <label class="control-label col-xs-3 requiredField">
                        Device Group
                    </label>
                    <div class="col-xs-9">
                        {{ struct.device_tree.group_lut[edit_obj.device_group].name }}
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3 requiredField">
                        Device Class
                    </label>
                    <div class="col-xs-9">
                        {{ struct.device_tree.device_class_tree.lut[edit_obj.device_class].name }}
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3">
                        Categories
                        <icsw-tools-button type="modify" size="xs" ng-click="modify_categories(false, $event)" value=""></icsw-tools-button>
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.$$category_info }}
                    </div>
                </div>
                <div class="row" ng-if="has_valid_license('asset')">
                    <label class="control-label col-xs-3">
                        Asset Categories
                        <icsw-tools-button type="modify" size="xs" ng-click="modify_categories(true, $event)" value=""></icsw-tools-button>
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.$$asset_category_info }}
                    </div>
                </div>
                <div class="row" ng-if="has_valid_license('netboot')">
                    <label class="control-label col-xs-3">
                        Boot Server
                    </label>
                    <div class="col-xs-9" ng-if="struct.mother_server_lut[edit_obj.bootserver]">
                        {{ struct.mother_server_lut[edit_obj.bootserver].$$full_name_with_type }}
                    </div>
                    <div class="col-xs-9" ng-if="!struct.mother_server_lut[edit_obj.bootserver]">
                        ---
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>
            <h3>Network Information</h3>
        </legend>
        <div class="form-group row">
            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <label class="control-label col-xs-3">
                        IP Addresses
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.$$ip_info }}
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3">
                        ComCapabilities
                    </label>
                    <div class="col-xs-9">
                        <icsw-device-com-capabilities icsw-device="edit_obj" icsw-detail="1"></icsw-device-com-capabilities>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-xs-12">
                <div class="row">
                    <label class="control-label col-xs-3">
                        SNMP Scheme
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.$$snmp_scheme_info }}
                    </div>
                </div>
                <div class="row">
                    <label class="control-label col-xs-3">
                        SNMP Information
                    </label>
                    <div class="col-xs-9">
                        {{ edit_obj.$$snmp_info }}
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <div
            class="pull-right"
            ng-show="acl_modify(edit_obj, 'backbone.device.change_basic')"
        >
            <icsw-tools-button type="delete" ng-if="!struct.is_devicegroup" ng-click="delete($event)"></icsw-tools-button>
            <icsw-tools-button type="modify" button-type="submit" ng-click="modify($event)"></icsw-tools-button>
        </div>
    </fieldset>
    <fieldset>
        <legend>
            <h3>Fixed Variables
            <icsw-tools-button
                type="show"
                size="xs"
                is-show="edit_obj.$$show_atfv"
                ng-click="edit_obj.$$show_atfv = !edit_obj.$$show_atfv"
            ></icsw-tools-button></h3>
        </legend>
        <div class="panel panel-default" ng-if="edit_obj.$$show_atfv">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <icsw-device-fixed-scope-vars-overview
                            icsw-device="edit_obj"
                        ></icsw-device-fixed-scope-vars-overview>
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
</script>

<script type="text/ng-template" id="icsw.device.info.edit.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>
                Basic Settings for '{{ edit_obj.$$print_name }}'
                <img ng-if="edit_obj.mon_ext_host" ng-src="{{ edit_obj.$$image_source }}" width="16"></img>
            </legend>
            <div class="form-group row">
                <div class="col-md-6 col-xs-12">
                    <div class="form-group row">
                        <label class="control-label col-xs-4 requiredField icsw-formlabel">Device Name<span class="asteriskField">*</span></label>
                        <div class="controls col-xs-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="192" ng-model="edit_obj.name" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 requiredField icsw-formlabel">Domain Tree Node<span class="asteriskField">*</span></label>
                        <div class="controls col-xs-8">
                            <ui-select ng-model="edit_obj.domain_tree_node" class="maxwidth500">
                                <ui-select-match class="ui-select-match" placeholder="Select a domain tree node for this device">
                                    {{ $select.selected.tree_info }}
                                </ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.domain_tree.list | props_filter:{tree_info:$select.search}">
                                    <div ng-bind-html="value.tree_info | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 icsw-formlabel">Alias</label>
                        <div class="controls col-xs-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="384"  ng-model="edit_obj.alias" type="text"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 icsw-formlabel">ComCapabilities</label>
                        <div class="col-xs-8 form-control-static">
                            <icsw-device-com-capabilities icsw-device="edit_obj" icsw-detail="1"></icsw-device-com-capabilities>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 icsw-formlabel">Comment</label>
                        <div class="controls col-xs-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="384" ng-model="edit_obj.comment" type="text"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 icsw-formlabel">Enabled</label>
                        <div class="controls col-xs-8">
                            <icsw-tools-yes-no flag="edit_obj.enabled"></icsw-tools-yes-no>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-xs-12">
                    <div class="form-group row">
                        <label class="control-label col-xs-4 requiredField icsw-formlabel">Device Group<span class="asteriskField">*</span></label>
                        <div class="controls col-xs-8">
                            <ui-select ng-model="edit_obj.device_group" class="maxwidth500">
                                <ui-select-match class="ui-select-match" placeholder="Select a DeviceGroup for this device">
                                    {{ $select.selected.name }}
                                </ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.device_tree.group_list | filter:struct.device_tree.ignore_cdg | props_filter:{name:$select.search}">
                                    <div ng-bind-html="value.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 requiredField icsw-formlabel">Device Class<span class="asteriskField">*</span></label>
                        <div class="controls col-xs-8">
                            <ui-select ng-model="edit_obj.device_class" class="maxwidth500">
                                <ui-select-match class="ui-select-match" placeholder="Select a DeviceClass for this device">
                                    {{ $select.selected.name }}
                                </ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.device_tree.device_class_tree.list | props_filter:{name:$select.search}">
                                    <div ng-bind-html="value.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-xs-4 icsw-formlabel">Categories</label>
                        <div class="col-sm-8 control-label" style="text-align:left;">
                            {{ edit_obj.$$category_info }}
                        </div>
                    </div>
                    <div class="form-group row" ng-if="has_valid_license('asset')">
                        <label class="control-label col-xs-4 icsw-formlabel">Asset Categories</label>
                        <div class="col-sm-8 control-label" style="text-align:left;">
                            {{ edit_obj.$$asset_category_info }}
                        </div>
                    </div>
                    <div class="row form-group row" ng-if="has_valid_license('netboot')">
                        <label class="control-label col-xs-4 icsw-formlabel">
                            Bootserver
                        </label>
                        <div class="col-xs-8 controls">
                            <div class="input-group maxwidth500">
                                <ui-select ng-model="edit_obj.bootserver" ng-disabled="false" class="">
                                    <ui-select-match class="ui-select-match" placeholder="Select the Bootserver">
                                        {{ $select.selected.full_name }}
                                    </ui-select-match>
                                    <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.mother_server_list | props_filter:{full_name:$select.search}">
                                        <div ng-bind-html="value.full_name | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.bootserver = undefined" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <!--
                    <div class="row">
                        <label class="control-label col-xs-3 icsw-formlabel">
                            SNMP Scheme
                        </label>
                        <div class="col-sm-8">
                            {{ edit_obj.$$snmp_scheme_info }}
                            <ui-select ng-model="edit_obj.snmp_schemes" class="maxwidth500">
                            <ui-select-match class="ui-select-match" placeholder="Select a SNMP Scheme for this device">
                                {{ $select.selected.name }}
                            </ui-select-match>
                            <ui-select-choices class="ui-select-choices" repeat=" | props_filter:{name:$select.search}">
                                <div ng-bind-html="value.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                        </div>
                    </div>
                    <div class="row">
                        <label class="control-label col-xs-3 icsw-formlabel">SNMP Information</label>
                        <div class="col-sm-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="384"  ng-model="edit_obj.$$snmp_info" type="text"/>
                        </div>
                    </div>
                    -->
                </div>
            </div>
        </fieldset>
    </form>
</script>

<script type="text/ng-template" id="icsw.devicegroup.info.form">
    <fieldset>
        <legend>Basic Settings for Group '{{ edit_obj.name }}'</legend>
        <div class="form-group">
            <div class="row">
                <label class="control-label col-sm-3 requiredField maxwidth500">
                    Name
                </label>
                <div class="form-control-static col-sm-9">
                    {{ edit_obj.name }}.{{ struct.domain_tree.lut[edit_obj.domain_tree_node].full_name }}
                </div>
            </div>
            <div ng-show="edit_obj.description">
                <div class="row">
                    <label class="control-label col-sm-3 maxwidth500">
                        Description
                    </label>
                    <div class="form-control-static col-sm-9">
                        {{ edit_obj.description }}
                    </div>
                </div>
            </div>
        </div>
    </fieldset>
    <div class="pull-right" ng-show="acl_modify(edit_obj, 'backbone.device.change_basic')">
        <icsw-tools-button type="modify" button-type="submit" ng-click="modify()"></icsw-tools-button>
    </div>
</script>

<script type="text/ng-template" id="icsw.devicegroup.info.edit.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Basic Settings for Group '{{ edit_obj.name }}'</legend>
            <div class="form-group">
                <label class="control-label col-sm-5 requiredField icsw-formlabel">
                    Name<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control  maxwidth500" maxlength="192" ng-model="edit_obj.name" required="True" type="text"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-5 requiredField icsw-formlabel">
                    Domain Tree Node<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <ui-select ng-model="edit_obj.domain_tree_node" class="maxwidth500">
                        <ui-select-match class="ui-select-match" placeholder="Select a Domain Tree Node for this Device">
                            {{ $select.selected.tree_info }}
                        </ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.domain_tree.list | props_filter:{tree_info:$select.search}">
                            <div ng-bind-html="value.tree_info | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-5 icsw-formlabel">
                    Description
                </label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control maxwidth500" maxlength="384" ng-model="edit_obj.description" type="text"/>
                </div>
            </div>
        </fieldset>
    </form>
</script>
