<script type="text/ng-template" id="icsw/setup/progress">
    <icsw-setup-progress icsw-sel-man="0"></icsw-setup-progress>
</script>


<script type="text/ng-template" id="icsw.setup.progress">
    <div class="container-fluid" >
        <div
            uib-alert
            class="alert-warning"
            ng-show="!struct.data_loaded"
        >
            Fetching data from server ...
        </div>
        <div ng-if="struct.data_loaded">
            <br/>
            <uib-tabset ng-click="setup_tasks_tab_clicked()" active="struct.active_tab_index">
                <uib-tab>
                    <uib-tab-heading>
                        <span>Setup Tasks</span>
                    </uib-tab-heading>

                    <table
                        class="table table-condensed table-hover table-striped"
                    >
                        <thead>
                            <tr>
                                <th style="width: 10px" class="lead">Task</th>
                                <th style="width: 500px" class="lead">Description</th>
                                <th style="width: 10px" class="lead text-center">Status</th>
                                <th style="width: 10px" class="lead text-center">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="task in struct.tasks" class="lead">
                                <td>
                                    {{ task.number }}.
                                </td>
                                <td>
                                    {{ task.description }}
                                </td>
                                <td ng-class="task.bg_color_class" class="text-center" ng-click="open_in_new_tab_for_system(task)">
                                    <i ng-class="task.icon_class" style="font-size: 2em !important;"></i>
                                </td>
                                <td class="text-center">
                                    <icsw-tools-button
                                        type="modify"
                                        ng-click="open_in_new_tab_for_system(task)"
                                        size="sm"
                                        value="Handle Issue"
                                    ></icsw-tools-button>
                                    <icsw-tools-button
                                        type="enable"
                                        ng-click="ignore_issue(task)"
                                        is-enable="task.ignore"
                                        size="sm"
                                        icsw-value="task.ignore_text"
                                    ></icsw-tools-button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </uib-tab>
                <uib-tab ng-click="system_overview_tab_clicked()">
                    <uib-tab-heading>
                        <span>System Status</span>
                    </uib-tab-heading>
                    <br>
                        <label class="control-label">Component Setup Status:</label>
                    <br/>
                    <div class="container-fluid">
                        <div ng-repeat="task in struct.tasks" class="col-md-4 col-xs-6">
                            <div class="panel" ng-class="task.panel_class">
                                <div class="panel-heading">
                                    <h3 class="panel-title">{{ task.header }}</h3>
                                </div>
                                <div class="panel-body">
                                    <strong>
                                        <a href="" ng-click="open_in_new_tab_for_system(task)">{{ task.text }}</a>
                                        &nbsp;
                                        <i ng-class="task.icon_class"></i>
                                    </strong>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br><label class="control-label">Total System Setup Progress:</label><br/>
                    <div class="progress">
                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                            aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( struct.system_completion + '%' ) }">
                            <span>{{ struct.system_completion }} %</span>
                        </div>
                    </div>
                </uib-tab>
                <uib-tab ng-click="device_overview_tab_clicked()">
                    <uib-tab-heading>
                        <span>Device Status</span>
                    </uib-tab-heading>
                    <br/>
                    <table
                        st-table="entries_displayed"
                        st-safe-src="struct.devices"
                        class="table table-condensed table-striped table-hover simple-border"
                    >

                        <thead>
                            <tr>
                                <td colspan="99">
                                    <span
                                        icsw-tools-pagination
                                        st-items-by-page="20"
                                        st-displayed-pages="11"
                                        possible-items-by-page="10,20,50,100"
                                        class="pull-xs-left"
                                    ></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="99">
                                    Extended Information:
                                    <div class="btn-group btn-group-xs">
                                        <input
                                            type="button"
                                            title="show_extended_information_button"
                                            ng-value="struct.show_extended_information_button_value"
                                            ng-class="struct.show_extended_information_button_class"
                                            ng-click="show_extended_information_button_pressed()">
                                        </input>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th st-sort="name">Name</th>
                                <th st-sort="device_group_name">Group</th>
                                <th st-sort="$$date_created" st-sort-default="reverse">Created at</th>
                                <th>Creator</th>
                                <th st-sort="$$monitoring_checks_sort_hint" class="text-center">Monitoring Checks</th>
                                <th st-sort="$$location_data_sort_hint" class="text-center">Locations</th>
                                <th st-sort="$$asset_data_sort_hint" class="text-center">Asset Scans</th>
                                <th st-sort="$$graphing_data_sort_hint" class="text-center">Graphing Data</th>
                                <th st-sort="$$overview_completion_percentage" class="text-center">% Complete</th>
                            </tr>
                            <tr>
                                <th>
                                    <input st-search="name" placeholder="filter by device name" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="device_group_name" placeholder="filter by group" class="input-sm form-control" type="search"/>
                                </th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="obj in entries_displayed">
                                <td>
                                    <button type="button" class="btn btn-xs btn-success" ng-click="show_device($event, obj)">{{ obj.full_name }}</button>
                                </td>
                                <td>{{ obj.device_group_name }}</td>
                                <td>{{ obj.$$date_created }}</td>
                                <td>{{ obj.$$creator }}</td>
                                <td class="text-center"><div ng-class="obj.$$monitoring_checks_availability_class"><strong><a href="" ng-click='open_in_new_tab_for_devices(obj, 0)' style="height:25px;">{{ struct.show_extended_information_button_enabled ? obj.$$monitoring_checks_availability_extended_text : obj.$$monitoring_checks_availability_text}}</a></strong></div></td>
                                <td class="text-center"><div ng-class="obj.$$location_data_availability_class"><strong><a href="" ng-click='open_in_new_tab_for_devices(obj, 1)' style="height:25px;">{{ struct.show_extended_information_button_enabled ? obj.$$location_data_availability_extended_text : obj.$$location_data_availability_text }}</a></strong></div></td>
                                <td class="text-center"><div ng-class="obj.$$asset_data_availability_class"><strong><a href="" ng-click='open_in_new_tab_for_devices(obj, 2)' style="height:25px;">{{ struct.show_extended_information_button_enabled ? obj.$$asset_data_availability_extended_text : obj.$$asset_data_availability_text }}</a></strong></div></td>
                                <td class="text-center"><div ng-class="obj.$$graphing_data_availability_class"><strong><a href="" ng-click='setup_graphing(obj)' style="height:25px;">{{ struct.show_extended_information_button_enabled ? obj.$$graphing_data_availability_extended_text : obj.$$graphing_data_availability_text }}</a></strong></div></td>
                                <td>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40"
                                            aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( obj.$$overview_completion_percentage + '%' ) }">
                                            <span>{{ obj.$$overview_completion_percentage }}</span>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </uib-tab>
                <uib-tab ng-repeat="tab in struct.tabs" ng-click="mark_unfresh(tab)">
                    <uib-tab-heading>
                        <span>{{ tab.heading }}</span>
                        <icsw-tools-button size="xs" type="close" value="" ng-click="close_tab(tab)"></icsw-tools-button>
                    </uib-tab-heading>
                    <icsw-device-mon-config-overview ng-if="tab.type == 0" icsw-sel-man="1" icsw-select-device="{{ tab.device_id }}"></icsw-device-mon-config-overview>
                    <icsw-device-location-overview ng-if="tab.type == 1" icsw-sel-man="1" icsw-select-device="{{ tab.device_id }}"></icsw-device-location-overview>
                    <icsw-device-asset-overview-reduced ng-if="tab.type == 2" icsw-sel-man="1" icsw-select-device="{{ tab.device_id }}"></icsw-device-asset-overview-reduced>
                    <icsw-rrd-graph-normal ng-if="tab.type == 3" icsw-sel-man="1" icsw-select-device="{{ tab.device_id }}"></icsw-rrd-graph-normal>
                    <icsw-device-tree-overview ng-if="tab.type == 4 && tab.devices_available == true"></icsw-device-tree-overview>
                    <icsw-device-create-mask ng-if="tab.type == 4 && tab.devices_available == false"></icsw-device-create-mask>
                    <br ng-if="tab.type == 5"/><icsw-config-moncheck-overview ng-if="tab.type == 5"></icsw-config-moncheck-overview>
                    <br ng-if="tab.type == 6"/><icsw-user-tree ng-if="tab.type == 6"></icsw-user-tree>
                    <br ng-if="tab.type == 7"/><icsw-config-location ng-if="tab.type == 7"></icsw-config-location>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>
</script>
