<script type="text/ng-template" id="icsw.device.network.overview">
    <div uib-alert class="alert-warning" ng-show="!struct.data_loaded">
        Fetching data from server...
    </div>
    <h3 ng-if="struct.data_loaded">
        Network Configuration for {{ struct.devices.length }} Devices
        ({{ struct.local_helper_obj.netdevice_list.length }} Netdevices,
        {{ struct.local_helper_obj.net_ip_list.length }} IPs, {{ struct.local_helper_obj.peer_list.length }} Peers)
        <icsw-tools-button ng-if="show_copy_button" type="modify" size="xs" value="Copy Networks" ng-click="copy_network()"></icsw-tools-button>
    </h3>
    <uib-accordion close-others="no" ng-if="struct.data_loaded">
        <div uib-accordion-group class="panel-default" is-open="struct.device_open">
            <uib-accordion-heading>
                <icsw-tools-accordion-chevron icsw-left="1" icsw-flag="struct.device_open"></icsw-tools-accordion-chevron>
                {{ struct.devices.length }} Devices
            </uib-accordion-heading>
            <table
                ng-show="struct.devices.length"
                class="table table-condensed table-hover table-striped"
                style="width:auto;"
            >
                <thead>
                    <tr>
                        <th>Device</th>
                        <th>Group</th>
                        <th>Comment</th>
                        <th>Coms</th>
                        <th>Boot Info</th>
                        <th class="text-right">#Ports</th>
                        <th class="text-right">#IPs</th>
                        <th class="text-right">#Peers</th>
                        <th>SNMP Schemes</th>
                        <th colspan="1">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr icsw-device-network-device-row ng-repeat="ndip_obj in struct.devices"></tr>
                </tbody>
            </table>
        </div>
        <div uib-accordion-group class="panel-default" is-open="struct.netdevice_open">
            <uib-accordion-heading>
                <icsw-tools-accordion-chevron icsw-left="1" icsw-flag="struct.netdevice_open"></icsw-tools-accordion-chevron>
                {{ struct.local_helper_obj.netdevice_list.length }} Netdevices
            </uib-accordion-heading>
            <icsw-tools-show-hide-columns
                ng-show="struct.devices.length"
                columns="idx port ips peers bridge bond mac devtype mtu speed penalty flags status desired"
                columns-target="show_column"
            >
            </icsw-tools-show-hide-columns>
            <table
                st-table="display_entries"
                st-safe-src="struct.local_helper_obj.netdevice_list"
                ng-show="struct.devices.length"
                class="table table-condensed table-hover table-striped"
            >
                <thead>
                    <tr>
                        <td colspan="99">
                            <div class="col-sm-3" style="padding-left:0px;">
                                <input st-search="" class="form-control" placeholder="filter ..." type="text"/>
                            </div>
                            <div
                                icsw-tools-pagination
                                st-items-by-page="10"
                                st-displayed-pages="11"
                                class="col-sm-9"
                                possible-items-by-page="10,20,50,100,200,500,1000"
                            ></div>
                        </td>
                    </tr>
                    <tr>
                        <th>Device</th>
                        <th ng-show="show_column.idx" class="text-right">Idx</th>
                        <th ng-show="show_column.port">Port</th>
                        <th ng-show="show_column.ips" class="text-right">#IPs</th>
                        <th ng-show="show_column.peers" class="text-right">#Peers</th>
                        <th ng-show="show_column.bridge">Bridge</th>
                        <th ng-show="show_column.bond">Bond</th>
                        <th ng-show="show_column.mac">MAC</th>
                        <th ng-show="show_column.devtype">Device Type</th>
                        <th ng-show="show_column.mtu" class="text-right">MTU</th>
                        <th ng-show="show_column.speed">Speed</th>
                        <th ng-show="show_column.penalty" class="text-right">Penalty</th>
                        <th ng-show="show_column.flags">Flags</th>
                        <th ng-show="show_column.status" class="text-center">Status</th>
                        <th ng-show="show_column.desired" class="text-center">Desired</th>
                        <th colspan="4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr icsw-device-network-netdevice-row ng-repeat="ndip_obj in display_entries"></tr>
                </tbody>
            </table>
        </div>
        <div uib-accordion-group class="panel-default" is-open="struct.netip_open">
            <uib-accordion-heading>
                <icsw-tools-accordion-chevron icsw-left="1" icsw-flag="struct.netip_open"></icsw-tools-accordion-chevron>
                {{ struct.local_helper_obj.net_ip_list.length }} IP Addresses
            </uib-accordion-heading>
            <table
                ng-show="struct.devices.length && struct.local_helper_obj.net_ip_list.length"
                class="table table-condensed table-hover table-striped"
                style="width:auto;"
            >
                <thead>
                    <tr>
                        <th>Device</th>
                        <th>Port</th>
                        <th>IP</th>
                        <th>Network</th>
                        <th>DTN</th>
                        <th>Alias</th>
                        <th colspan="2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr icsw-device-network-ip-row ng-repeat="ndip_obj in struct.local_helper_obj.net_ip_list"></tr>
                </tbody>
            </table>
        </div>
        <div uib-accordion-group class="panel-default" is-open="struct.peer_open">
            <uib-accordion-heading>
                <icsw-tools-accordion-chevron icsw-left="1" icsw-flag="struct.peer_open"></icsw-tools-accordion-chevron>
                {{ struct.local_helper_obj.peer_list.length }} Peer Connections
            </uib-accordion-heading>
            <table
                ng-show="struct.devices.length"
                class="table table-condensed table-hover table-striped"
                style="width:auto;"
            >
                <thead>
                    <tr>
                        <th>Device</th>
                        <th>Port</th>
                        <th>IPs</th>
                        <th>Cost</th>
                        <th>Device</th>
                        <th>Port</th>
                        <th>IPs</th>
                        <th>Type</th>
                        <th>Autocreated</th>
                        <th>Info</th>
                        <th colspan="2">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr icsw-device-network-peer-row ng-repeat="ndip_obj in struct.local_helper_obj.peer_list track by $index"></tr>
                </tbody>
            </table>
        </div>
    </uib-accordion>
</script>

<script type="text/ng-template" id="icsw.device.network.copy">
    <form class="form-horizontal" name="form_data">
        Copy Network From
        <ui-select ng-model="settings.src_device" style="max-width:400px; min-width:240px;">
            <ui-select-match class="ui-select-match" placeholder="select a target netdevice speed">{{$select.selected.full_name}}</ui-select-match>
            <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.devices">
                <div ng-bind-html="value.full_name | highlight: $select.search"></div>
            </ui-select-choices>
        </ui-select>
        <ul class="dropdown-menu">
            <li ng-click="copy_network(obj, $event)" ng-repeat="obj in struct.devices"><a>{{ obj.full_name }}</a></li>
        </ul>
        <input type="button" ng-class="copy_com_class()" ng-value="copy_com_value()" ng-click="toggle_copy_com()"></input>
    </form>
</script>

<script type="text/ng-template" id="icsw.device.network.device.row">
    <td>
        {{ ndip_obj.full_name }}
    </td>
    <td>
        {{ ndip_obj.$$group.name }}
    </td>
    <td>
        {{ ndip_obj.comment }}
    </td>
    <td>
        <icsw-device-com-capabilities icsw-device="ndip_obj"></icsw-device-com-capabilities>
    </td>
    <td>
        <input
            type="button"
            class="btn btn-xs btn-default"
            ng-class="ndip_obj.$$bootdevice_info_class"
            ng-show="ndip_obj.$$num_boot_ips"
            ng-value="ndip_obj.$$boot_info_value"
            ng-click="edit_boot_settings($event, ndip_obj)">
        </input>
        <span ng-show="!ndip_obj.$$num_boot_ips">N/A</span>
    </td>
    <td class="text-right">
        {{ ndip_obj.$$num_netdevices }}
    </td>
    <td class="text-right">
        {{ ndip_obj.$$num_netips }}
    </td>
    <td class="text-right">
        {{ ndip_obj.$$num_peers }}
    </td>
    <td>
        <span ng-repeat="obj in ndip_obj.snmp_schemes">
            <span class="label label-info">{{ obj.full_name }}</span>
        </span>
        <span ng-show="!ndip_obj.snmp_schemes.length" class="text-warning">None</span>
    </td>
    <td>
        <div ng-show="acl_create(ndip_obj, 'backbone.device.change_network') && !ndip_obj.active_scan">
            <div class="btn-group btn-xs">

                <button type="button" ng-attr-class="btn btn-xs dropdown-toggle {{ icswToolsButtonConfigService.get_css_class('create') }}" data-toggle="dropdown">
                    create <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li ng-click="edit_netdevice($event, ndip_obj, true)"><a>Netdevice</a></li>
                    <li ng-show="ndip_obj.$$create_netip_ok" ng-click="edit_netip($event, ndip_obj, 'dev', true)"><a>IP Address</a></li>
                    <li ng-show="ndip_obj.$$create_peer_ok" ng-click="edit_peer($event, ndip_obj, 'dev', true)"><a>Network Topology Connection</a></li>
                </ul>
            </div>
            <icsw-tools-button type="reload" value="update network" size="xs"
                ng-show="acl_create(obj, 'backbone.device.change_network')"
                ng-click="scan_device_network(ndip_obj, $event)">
            </icsw-tools-button>
        </div>
    </td>
</script>

<script type="text/ng-template" id="icsw.device.network.netdevice.row">
    <td>
        {{ struct.device_tree.all_lut[ndip_obj.device].full_name }}
    </td>
    <td ng-show="show_column.idx" class="text-right">
        <span ng-show="ndip_obj.snmp_idx">{{ ndip_obj.snmp_idx }}</span>
    <td ng-show="show_column.port">
        <span ng-show="ndip_obj.enabled">
            {{ ndip_obj.$$info_string }}
        </span>
        <span ng-show="!ndip_obj.enabled">
            <em><strike>{{ ndip_obj.$$info_string }}</strike></em>
        </span>
    </td>
    <td ng-show="show_column.ips" class="text-right">
        {{ ndip_obj.$$num_netips }}
    </td>
    <td ng-show="show_column.peers" class="text-right">
        {{ get_num_peers_nd(ndip_obj) }}
    </td>
    <td ng-show="show_column.bridge">{{ ndip_obj.$$bridge_info_string }}</td>
    <td ng-show="show_column.bond">{{ ndip_obj.$$bond_info_string }}</td>
    <td ng-show="show_column.mac"><code>{{ ndip_obj.macaddr }}</code></td>
    <td ng-show="show_column.devtype">{{ ndip_obj.$$type_string }}</td>
    <td ng-show="show_column.mtu" class="text-right">{{ ndip_obj.mtu }}</td>
    <td ng-if="show_column.speed && ndip_obj.ignore_netdevice_speed" style="text-decoration: line-through;">
        {{ ndip_obj.$$speed_info_string }}
    </td>
    <td ng-if="show_column.speed && !ndip_obj.ignore_netdevice_speed">
        {{ ndip_obj.$$speed_info_string }}
    </td>
    <td ng-show="show_column.penalty" class="text-right">{{ ndip_obj.penalty }}</td>
    <td ng-show="show_column.flags">{{ ndip_obj.$$flags_info_string }}</td>
    <td
        ng-show="show_column.status"
        ng-class="ndip_obj.$$snmp_ao_status_class"
    >
        {{ ndip_obj.$$snmp_ao_status }}
    </td>
    <td ng-show="show_column.desired" class="text-center">{{ ndip_obj.$$desired_status }}</td>
    <td>
        <button
            type="button"
            class="btn btn-xs btn-success"
            tooltip-placement="right"
            uib-tooltip-html="build_netdevice_tooltip(ndip_obj)"
        >
            <span class="glyphicon glyphicon-info-sign"></span>
        </button>
    </td>
    <td>
        <div ng-show="!ndip_obj.$$device.$$any_scan_locks">
            <icsw-tools-button
                type="modify"
                ng-click="edit_netdevice($event, ndip_obj, false)"
                size="xs"
                ng-show="acl_modify(obj, 'backbone.device.change_network')"
            ></icsw-tools-button>
        </div>
    </td>
    <td>
        <div ng-show="!ndip_obj.$$device.$$any_scan_locks">
            <icsw-tools-button type="delete" size="xs" ng-click="delete_netdevice($event, ndip_obj)" ng-show="acl_delete(obj, 'backbone.device.change_network')"/>
        </div>
    </td>
    <td>
        <div class="btn-group btn-xs" ng-show="acl_create(obj, 'backbone.device.change_network') && !ndip_obj.$$device.$$any_scan_locks">
            <button type="button" class="btn {{ icswToolsButtonConfigService.get_css_class('create') }} btn-xs dropdown-toggle" data-toggle="dropdown">
                create <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li ng-show="struct.network_tree.nw_list.length" ng-click="edit_netip($event, ndip_obj, 'nd', true)">
                    <a>IP Address</a></li>
                <li ng-click="edit_peer($event, ndip_obj, 'nd', true)"><a>Network Topology Connection</a></li>
            </ul>
        </div>
    </td>
</script>

<script type="text/ng-template" id="icsw.device.network.ip.row">
    <td>{{ ndip_obj.$$device.full_name }}</td>
    <td>{{ ndip_obj.$$netdevice.$$info_string }}</td>
    <td><code>{{ ndip_obj.ip }}</code></td>
    <td>{{ ndip_obj.$$network.$$info_string }}</td>
    <td>{{ ndip_obj.$$domain_tree_node.tree_info  }}</td>
    <td>
        <span ng-show="ndip_obj.alias">{{ ndip_obj.alias }} <span ng-show="ndip_obj.alias_excl">( exclusive )</span></span>
    </td>
    <td>
        <div ng-show="!ndip_obj.$$device.$$any_scan_locks">
            <icsw-tools-button type="modify" size="xs" ng-click="edit_netip($event, ndip_obj, 'ip', false)" ng-show="acl_modify(obj, 'backbone.device.change_network')"/>
        </div>
    </td>
    <td>
        <div ng-show="!ndip_obj.$$device.$$any_scan_locks">
            <icsw-tools-button type="delete" size="xs" ng-click="delete_netip($event, ndip_obj)" ng-show="acl_delete(obj, 'backbone.device.change_network')"/>
        </div>
    </td>
</script>

<script type="text/ng-template" id="icsw.device.network.peer.row">
    <td ng-class="get_peer_class(ndip_obj, 's')">{{ get_devname_from_peer(ndip_obj, "s") }}</td>
    <td ng-class="get_peer_class(ndip_obj, 's')">{{ get_netdevice_name_from_peer(ndip_obj, "s") }}</td>
    <td ng-class="get_peer_class(ndip_obj, 's')">{{ get_ip_list_from_peer(ndip_obj, "s") }}</td>
    <td>
        with cost {{ ndip_obj.penalty }}
        &nbsp;<span class="label label-primary">{{ get_peer_cost(ndip_obj) }}</span>&nbsp;
    </td>
    <td ng-class="get_peer_class(ndip_obj, 'd')">{{ get_devname_from_peer(ndip_obj, "d") }}</td>
    <td ng-class="get_peer_class(ndip_obj, 'd')">{{ get_netdevice_name_from_peer(ndip_obj, "d") }}</td>
    <td ng-class="get_peer_class(ndip_obj, 'd')">{{ get_ip_list_from_peer(ndip_obj, "d") }}</td>
    <td>
        {{ get_peer_type(ndip_obj) }}
    </td>
    <td class="text-center">
        {{ ndip_obj.peer.autocreated | yesno2 }}
    </td>
    <td>
        {{ ndip_obj.peer.info }}
    </td>
    <td>
        <icsw-tools-button type="modify" size="xs" ng-click="edit_peer($event, ndip_obj, 'peer', false)" ng-show="acl_modify(obj, 'backbone.device.change_network')"></icsw-tools-button>
    </td>
    <td>
        <icsw-tools-button type="delete" size="xs" ng-click="delete_peer($event, ndip_obj)" ng-show="acl_delete(obj, 'backbone.device.change_network')"></icsw-tools-button>
    </td>
</script>

<script type="text/ng-template" id="icsw.device.network.cluster.info">
    <ul>
        <li ng-repeat="device in struct.devices">
            {{ device.full_name }} ({{ device.device_group_name }})
        </li>
    </ul>
</script>

<script type="text/ng-template" id="icsw.device.network.total">
    <div class="container-fluid">
        <uib-tabset icsw-tools-add-acl-functions>
            <uib-tab heading="Device Settings">
                <icsw-device-network-overview icsw-sel-man="0" show-copy-button="1">
                </icsw-device-network-overview>
            </uib-tab>

             <uib-tab heading="Network Topology" select="select_tab()">
                <div>
                    <icsw-device-livestatus icsw-var-name="'$$network_topology_pipe'"></icsw-device-livestatus>
                </div>
            </uib-tab>
            <uib-tab
                heading="Clusters"
                ng-if="acl_read(null, 'backbone.network.show_clusters')"
                select="select_tab('cluster')"
            >
                <div ng-controller="icswDeviceNetworkClusterCtrl">
                    <h3>
                        Network Clusters ({{ struct.clusters.length }} Entries)
                        <icsw-tools-button type="reload" value="reload" size="sm" ng-click="reload()"></icsw-tools-button>
                    </h3>
                    <table
                        class="table table-condensed table-hover table-striped"
                        style="width:auto;"
                    >
                        <thead>
                            <tr>
                                <th>Index</th>
                                <th>Has Netdevices</th>
                                <th>Devices</th>
                                <th>Netdevices</th>
                                <th>Selected</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="cluster in struct.clusters">
                                <td>{{ $index + 1 }}</td>
                                <td>{{ cluster.with_netdevices | yesno2 }}</td>
                                <td class="text-right">{{ cluster.devices }}</td>
                                <td class="text-right">{{ cluster.net_devices }}</td>
                                <td class="text-center">{{ is_selected(cluster) }}</td>
                                <td>
                                    <input type="button" class="btn btn-xs btn-primary" value="show" ng-click="show_cluster(cluster)"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </uib-tab>

            <uib-tab heading="Networks">
                <icsw-network-list></icsw-network-list>
                <icsw-network-list-service-tabs></icsw-network-list-service-tabs>
            </uib-tab>

            <uib-tab heading="Network Types and Device Types">
                <uib-tabset>
                    <uib-tab heading="Network Types">
                        <icsw-tools-rest-table-new target-list="entries" config-service="icswNetworkTypeService">
                            <h3>Network Types ({{ entries.length }} Entries)
                            <icsw-tools-button type="create" value="create" ng-click="create($event)" size="sm"/></h3>
                            <table st-table="entries_displayed" st-safe-src="entries"
                                   class="table table-hover table-condensed table-striped" style="width:auto;">
                                <thead>
                                    <tr>
                                        <th st-sort="identifier" st-sort-default="true">Type</th>
                                        <th st-sort="description">Description</th>
                                        <th colspan="2">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="obj in entries_displayed">
                                        <td>{{ config_service.resolve_type(obj.identifier) }} ({{ obj.identifier }})</td>
                                        <td>{{ obj.description }}</td>
                                        <td><icsw-tools-button type="modify" ng-click="edit($event, obj)" size="xs"></icsw-tools-button></td>
                                        <td><icsw-tools-button type="delete" ng-click="delete($event, obj)" size="xs"></icsw-tools-button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </icsw-tools-rest-table-new>
                    </uib-tab>
                    <uib-tab heading="Network Device Types">
                        <icsw-tools-rest-table-new target-list="entries" config-service="icswNetworkDeviceTypeService">
                            <h3>Network Device Types ({{entries.length}} Entries)</h3>
                            <icsw-tools-button type="create" ng-click="create($event)" size="sm"/>
                            <table st-table="entries_displayed" st-safe-src="entries"
                                   class="table table-hover table-condensed table-striped" style="width:auto;">
                                <thead>
                                    <tr>
                                        <td colspan="99">
                                            <div icsw-tools-pagination st-items-by-page="10" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th st-sort="identifier" st-sort-default="true">ID</th>
                                        <th st-sort="description">Description</th>
                                        <th st-sort="name_re">RegExp</th>
                                        <th st-sort="mac_bytes">MAC bytes</th>
                                        <th st-sort="allow_virtual_interfaces">virtIF allowed</th>
                                        <th st-sort="for_matching">For matching</th>
                                        <th st-sort="auto_created">Autocreated</th>
                                        <th colspan="2">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="obj in entries_displayed">
                                        <td>{{ obj.identifier }}</td>
                                        <td>{{ obj.description  }}</td>
                                        <td>{{ obj.name_re }}</td>
                                        <td class="text-center">{{ obj.mac_bytes }}</td>
                                        <td class="text-center">{{ obj.allow_virtual_interfaces | yesno1 }}</td>
                                        <td class="text-center">{{ obj.for_matching | yesno2 }}</td>
                                        <td class="text-center">{{ obj.auto_created | yesno2 }}</td>
                                        <td><icsw-tools-button type="modify" ng-click="edit($event, obj)" size="xs"></icsw-tools-button></td>
                                        <td><icsw-tools-button type="delete" ng-click="delete($event, obj)" size="xs"></icsw-tools-button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </icsw-tools-rest-table-new>
                    </uib-tab>
                </uib-tabset>
            </uib-tab>
        </uib-tabset>
    </div>
</script>

<script type="text/ng-template" id="icsw.network.simple.menu">
    <icsw-network-simple-overview></icsw-network-simple-overview>
</script>

<script type="text/ng-template" id="icsw.network.simple.overview">
    <icsw-network-list></icsw-network-list>
    <icsw-network-list-service-tabs></icsw-network-list-service-tabs>
</script>

<script type="text/ng-template" id="icsw.network.list.service.tabs">
    <style>
        .vertical-align {
            vertical-align: middle !important;
        }
    </style>
    <uib-tabset>
        <uib-tab ng-repeat="tab in struct.icsw_network_list_service.get_tabs()" active="true">
            <uib-tab-heading>
                <span>Network Details: {{ tab.heading }}</span>
                <icsw-tools-button size="xs" type="close" value="" ng-click="struct.icsw_network_list_service.close_tab(tab)"></icsw-tools-button>
            </uib-tab-heading>
            <br/>
            <uib-tabset>
                <uib-tab>
                    <uib-tab-heading>
                        <span>Device/IP List</span>
                    </uib-tab-heading>
                    <h3>
                        Network {{ tab.network_display.active_network.identifier }}, {{ tab.network_display.active_network.num_ip }} IP addresses
                    </h3>
                    <table st-table="network_entries_displayed" st-safe-src="tab.network_display.iplist" class="table table-condensed table-hover" style="width:auto;">
                        <thead>
                            <tr>
                                <td colspan="99">
                                    <div icsw-tools-pagination st-items-by-page="10" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                </td>
                            </tr>
                            <tr>
                                <th st-sort="ip">IP</th>
                                <th st-sort="netdevice_name">Netdevice</th>
                                <th st-sort="device_full_name">Device</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="obj in network_entries_displayed">
                               <td>{{ obj.ip }}</td>
                               <td>{{ obj.netdevice_name }}</td>
                               <td>{{ obj.device_full_name }}</td>
                            </tr>
                        </tbody>
                    </table>
                </uib-tab>
                <uib-tab>
                    <uib-tab-heading>
                        <span>Host Discovery Scans</span>
                    </uib-tab-heading>
                        <h3>{{ tab.nmap_scans.length }} Host Discovery Scans</h3>
                        <button type="button" ng-click="tab.open_difference_sub_tab()" class="btn btn-success btn-xs" ng-disabled="tab.show_difference_disabled">{{ tab.show_difference_text }}</button>
                        <table st-table="entries_displayed" st-safe-src="tab.nmap_scans" class="table table-condensed table-hover" style="width:auto;">
                            <thead>
                                <tr>
                                    <td colspan="99">
                                        <div icsw-tools-pagination st-items-by-page="20" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                    </td>
                                </tr>
                                <tr>
                                    <th st-sort="date" st-sort-default="reverse" class="text-center">Scan Time</th>
                                    <th class="text-center">Selection</th>
                                    <th st-sort="idx" class="text-center">Scan ID</th>
                                    <th st-sort="devices_found" class="text-center">Devices Found</th>
                                    <th st-sort="devices_scanned" class="text-center">Devices Scanned</th>
                                    <th class="text-center">Runtime</th>
                                    <th class="text-center">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="obj in entries_displayed">
                                    <td class="text-center">{{ obj.$$created }}</td>

                                    <td class="text-center">
                                        <button type="button" class="btn btn-xs" ng-class="obj.$$selected && 'btn-success' || 'btn-default'" ng-click="tab.select_row(obj)" value="sel">
                                            <span class="glyphicon" ng-class="obj.$$selected && 'glyphicon-ok' || 'glyphicon-minus'"></span>
                                        </button>
                                    </td>
                                    <td class="text-center">{{ obj.idx }}</td>
                                    <td class="text-center">{{ obj.devices_found }}</td>
                                    <td class="text-center">{{ obj.devices_scanned }}</td>
                                    <td class="text-center">{{ obj.runtime }}</td>
                                    <td class="text-center">
                                        <icsw-tools-button
                                            type="create"
                                            size="xs"
                                            ng-click="struct.icsw_network_list_service.create_new_host_discovery_detail_sub_tab(tab, obj.idx)"
                                            value="Show Details"
                                        ></icsw-tools-button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                </uib-tab>
                <uib-tab ng-repeat="sub_tab in tab.sub_tabs" ng-if="sub_tab.sub_tab_type == 0">
                    <uib-tab-heading>
                        <span>Scan: {{ sub_tab.nmap_scan.index }}</span>
                        <icsw-tools-button size="xs" type="close" value="" ng-click="tab.close_sub_tab(sub_tab)"></icsw-tools-button>
                    </uib-tab-heading>
                    <h3>{{ sub_tab.devices.length }} Devices found in {{ sub_tab.nmap_scan.runtime }} seconds ({{ sub_tab.nmap_scan.devices_scanned }} IPs scanned on {{ sub_tab.nmap_scan.scan_date }})
                    </h3>
                    <table st-table="entries_displayed" st-safe-src="sub_tab.display_devices" class="table table-condensed table-hover" style="width:auto;">
                        <thead>
                            <tr>
                                <td colspan="99">
                                    <div icsw-tools-pagination st-items-by-page="20" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                </td>
                            </tr>
                            <tr>
                                <td>Filter Actions:</td>
                                <td colspan="99">
                                    <div class="btn-group btn-group-xs">
                                        <input type="button" value="All Devices" ng-class="sub_tab.all_devices_filter_class" ng-click="sub_tab.show_all_devices_filter()"></input>
                                        <input type="button" value="Linked Only" ng-class="sub_tab.linked_only_filter_class" ng-click="sub_tab.show_linked_devices_only_filter()"></input>
                                        <input type="button" value="Unlinked Only" ng-class="sub_tab.unlinked_only_filter_class" ng-click="sub_tab.show_unlinked_devices_only_filter()"></input>
                                        <input type="button" value="New Devices (last scan)" ng-class="sub_tab.new_devices_last_scan_class" ng-click="sub_tab.show_new_devices_since_last_scan()"></input>
                                        <input type="button" value="New Devices (Alltime)" ng-class="sub_tab.new_devices_alltime_class" ng-click="sub_tab.show_new_devices_alltime()"></input>
                                        <input type="button" value="Ignored Devices" ng-class="sub_tab.ignored_devices_class" ng-click="sub_tab.show_ignored_devices()"></input>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Global Actions:
                                </td>
                                <td colspan="99">
                                    <button type="button" ng-click="sub_tab.handle_selection()" ng-disabled="sub_tab.selected_devices == 0" class="btn btn-success btn-xs">{{ sub_tab.ignore_text }} ({{ sub_tab.selected_devices }} Devices Selected)</button>
                                    <button type="button" ng-click="sub_tab.bulk_create()" ng-disabled="sub_tab.selected_devices == 0" class="btn btn-success btn-xs">Bulk Create {{ sub_tab.selected_devices }} Devices (Interactive)</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Selector Actions:
                                </td>
                                <td colspan="99">
                                    <button type="button" ng-click="sub_tab.select_all_nmap_devices()" class="btn btn-success btn-xs">Select All</button>
                                    <button type="button" ng-click="sub_tab.unselect_all_nmap_devices()" class="btn btn-success btn-xs">Unselect All</button>
                                    <button type="button" ng-click="sub_tab.select_all_linked_nmap_devices()" class="btn btn-success btn-xs">Select All Linked</button>
                                    <button type="button" ng-click="sub_tab.select_all_unlinked_nmap_devices()" class="btn btn-success btn-xs">Select All Unlinked</button>
                                </td>
                            </tr>
                            <tr>
                                <th st-sort="$$first_seen_timestamp" class="text-center">First Seen</th>
                                <th class="text-center">Selection</th>
                                <th st-sort="$$hostname_sort_hint" class="text-center">Hostname</th>
                                <th st-sort="$$ip_sort_hint" st-sort-default="true" class="text-center">IP</th>
                                <th st-sort="mac" class="text-center">MAC</th>
                                <th class="text-center">Linked Device</th>
                                <th class="text-center">Action</th>
                            </tr>
                            <tr>
                                <th>
                                    <input st-search="$$first_seen_nmap_scan_date" placeholder="filter by date" class="input-sm form-control" type="search"/>
                                </th>
                                <th></th>
                                <th>
                                    <input st-search="$$hostname" placeholder="filter by hostname" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="ip" placeholder="filter by ip" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="$$mac" placeholder="filter by mac" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="linked_devices" placeholder="filter by device name" class="input-sm form-control" type="search"/>
                                </th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="obj in entries_displayed">
                                <td class="vertical-align text-center"><button type="button" ng-disabled="sub_tab.nmap_scan.index == obj.first_seen_nmap_scan_idx || obj.first_seen_nmap_scan_idx == null" ng-click="struct.icsw_network_list_service.create_new_host_discovery_detail_sub_tab(tab, obj.first_seen_nmap_scan_idx)" class="btn btn-success btn-xs">{{ obj.$$first_seen_nmap_scan_date }}</button></td>
                                <td class="vertical-align text-center">
                                    <button type="button" class="btn btn-xs" ng-class="obj.$$selected && 'btn-success' || 'btn-default'" ng-click="sub_tab.select_nmap_scan_device(obj)" value="sel">
                                        <span class="glyphicon" ng-class="obj.$$selected && 'glyphicon-ok' || 'glyphicon-minus'"></span>
                                    </button>
                                </td>
                                <td class="vertical-align text-center">{{ obj.$$hostname }}</td>
                                <td class="vertical-align text-center">{{ obj.ip }}</td>
                                <td class="vertical-align text-center"><pre>{{ obj.$$mac }}</pre></td>
                                <td class="vertical-align text-center"><div ng-if="obj.linked_devices.length == 0">N/A</div><button ng-repeat="device in obj.linked_devices" type="button" class="btn btn-xs btn-success" ng-click="sub_tab.show_device($event, device)">{{ device.full_name }}</button></td>
                                <td class="vertical-align text-center">
                                    <icsw-tools-button
                                        type="create"
                                        size="xs"
                                        ng-click="struct.icsw_network_list_service.create_new_create_device_sub_tab(tab, obj)"
                                        value="Create Device"
                                    ></icsw-tools-button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <h3>Matrix</h3>
                    <table class="table" style="width:auto;">
                        <tr>
                            <td>White</td>
                            <td>Down/Unknown</td>
                        </tr>
                        <tr>
                            <td class="alert-success">Green</td>
                            <td>UP and Linked</td>
                        </tr>
                        <tr>
                            <td class="alert-danger">Red</td>
                            <td>UP and Unlinked</td>
                        </tr>
                        <tr>
                            <td class="alert-warning">Yellow</td>
                            <td>Ignored</td>
                        </tr>
                    </table>

                    <table class="table" style="border: 1px solid black;border-collapse: collapse;">
                        <tbody>
                            <tr ng-repeat="matrix_row in sub_tab.nmap_scan.matrix" style="border: 1px solid black;border-collapse: collapse;">
                                <td ng-repeat="row_info in matrix_row track by $index" ng-class="row_info[1]" style="border: 1px solid black;border-collapse: collapse;">{{ row_info[0] }}</td>
                            </tr>
                        </tbody>
                    </table>
                </uib-tab>
                <uib-tab ng-repeat="sub_tab in tab.sub_tabs" ng-if="sub_tab.sub_tab_type == 1">
                    <uib-tab-heading>
                        <span>Create new Device</span>
                        <icsw-tools-button size="xs" type="close" value="" ng-click="tab.close_sub_tab(sub_tab)"></icsw-tools-button>
                    </uib-tab-heading>
                    <icsw-device-create-mask deviceinfo="sub_tab.device_info"></icsw-device-create-mask>
                </uib-tab>
                <uib-tab ng-repeat="sub_tab in tab.sub_tabs" ng-if="sub_tab.sub_tab_type == 2">
                    <uib-tab-heading>
                        <span>Difference (Scan[{{sub_tab.scan_id_old }}] to Scan[{{sub_tab.scan_id_new}}])</span>
                        <icsw-tools-button size="xs" type="close" value="" ng-click="tab.close_sub_tab(sub_tab)"></icsw-tools-button>
                    </uib-tab-heading>
                    <h4>[{{ sub_tab.added_devices.length }} Added Devices]</h4>
                    <table st-table="entries_displayed_a" st-safe-src="sub_tab.added_devices" class="table table-condensed table-hover" style="width:auto;">
                        <thead>
                            <tr>
                                <td colspan="99">
                                    <div icsw-tools-pagination st-items-by-page="20" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                </td>
                            </tr>
                            <tr>
                                <th st-sort="$$hostname_sort_hint" class="text-center">Hostname</th>
                                <th st-sort="$$ip_sort_hint" st-sort-default="true" class="text-center">IP</th>
                                <th st-sort="mac" class="text-center">MAC</th>
                                <th class="text-center">Linked Device</th>
                                <th class="text-center">Action</th>
                            </tr>
                            <tr>
                                <th>
                                    <input st-search="$$hostname" placeholder="filter by hostname" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="ip" placeholder="filter by ip" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="$$mac" placeholder="filter by mac" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="linked_devices" placeholder="filter by device name" class="input-sm form-control" type="search"/>
                                </th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="obj in entries_displayed_a">
                                <td class="vertical-align text-center">{{ obj.$$hostname }}</td>
                                <td class="vertical-align text-center">{{ obj.ip }}</td>
                                <td class="vertical-align text-center">{{ obj.$$mac }}</td>
                                <td class="vertical-align text-center"><div ng-if="obj.linked_devices.length == 0">N/A</div><button ng-repeat="device in obj.linked_devices" type="button" class="btn btn-xs btn-success" ng-click="sub_tab.show_device($event, device)">{{ device.full_name }}</button></td>
                                <td class="vertical-align text-center"><button type="button" ng-click="struct.icsw_network_list_service.create_new_create_device_sub_tab(tab, obj)" class="btn btn-success btn-xs">Create new Device</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <h4>[{{ sub_tab.lost_devices.length }} Lost Devices]</h4>
                    <table st-table="entries_displayed_b" st-safe-src="sub_tab.lost_devices" class="table table-condensed table-hover" style="width:auto;">
                        <thead>
                            <tr>
                                <td colspan="99">
                                    <div icsw-tools-pagination st-items-by-page="20" st-displayed-pages="11" possible-items-by-page="10,20,50,100,200,500,1000"></div>
                                </td>
                            </tr>
                            <tr>
                                <th st-sort="$$hostname_sort_hint" class="text-center">Hostname</th>
                                <th st-sort="$$ip_sort_hint" st-sort-default="true" class="text-center">IP</th>
                                <th st-sort="mac" class="text-center">MAC</th>
                                <th class="text-center">Linked Device</th>
                                <th class="text-center">Action</th>
                            </tr>
                            <tr>
                                <th>
                                    <input st-search="$$hostname" placeholder="filter by hostname" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="ip" placeholder="filter by ip" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="$$mac" placeholder="filter by mac" class="input-sm form-control" type="search"/>
                                </th>
                                <th>
                                    <input st-search="linked_devices" placeholder="filter by device name" class="input-sm form-control" type="search"/>
                                </th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="obj in entries_displayed_b">
                                <td class="vertical-align">{{ obj.$$hostname }}</td>
                                <td class="vertical-align">{{ obj.ip }}</td>
                                <td class="vertical-align">{{ obj.$$mac }}</td>
                                <td class="vertical-align"><div ng-if="obj.linked_devices.length == 0">N/A</div><button ng-repeat="device in obj.linked_devices" type="button" class="btn btn-xs btn-success" ng-click="sub_tab.show_device($event, device)">{{ device.full_name }}</button></td>
                                <td class="vertical-align"><button type="button" ng-click="struct.icsw_network_list_service.create_new_create_device_sub_tab(tab, obj)" class="btn btn-success btn-xs">Create new Device(s)</button></td>
                            </tr>
                        </tbody>
                    </table>
                </uib-tab>
            </uib-tabset>
        </uib-tab>
    <uib-tabset>
</script>

<script type="text/ng-template" id="icsw.network.list">
    <icsw-tools-rest-table-new target-list="entries" config-service="icswNetworkListService">
        <h3>Networks ({{entries.length}} Entries)</h3>
        <div class="btn-group">
            <icsw-tools-button type="create" ng-click="create($event)" size="sm"></icsw-tools-button>
            <icsw-tools-button type="reload" ng-click="config_service.reload_networks()" size="sm"></icsw-tools-button>
            <icsw-tools-button type="create" value="Scan networks" ng-if="!entries.length" ng-click="config_service.rescan_networks()" size="sm"></icsw-tools-button>
        </div>

        <table st-table="entries_displayed" st-safe-src="entries" ng-show="entries.length"
               class="table table-hover table-condensed table-striped" style="width:auto;">

            <thead>
                <tr>
                    <td colspan="99">
                        <div icsw-tools-pagination st-items-by-page="10" st-displayed-pages="11"
                             possible-items-by-page="10,20,50,100,200,500,1000">
                        </div>
                        <icsw-tools-show-hide-columns
                            columns="network gateway autorange prefDTN"
                            columns-target="show_column"
                        ></icsw-tools-show-hide-columns>
                    </td>
                </tr>
                <tr>
                    <th st-sort="identifier" st-sort-default="true">ID</th>
                    <th ng-show="show_column.network" st-sort="network">Network Definition</th>
                    <th ng-show="show_column.gateway" st-sort="gateway">Gateway</th>
                    <th ng-show="show_column.gateway" st-sort="gw_pri">GW Pri</th>
                    <th ng-show="show_column.autorange">AutoRange</th>
                    <th st-sort="num_ip">#IPs</th>
                    <th st-sort="penalty">Penalty</th>
                    <th st-sort="enforce_unique_ips">Unique IP</th>
                    <th st-sort="network_type">Type</th>
                    <th st-sort="master_network">Master</th>
                    <th ng-show="show_column.prefDTN">Preferred DTN</th>
                    <th st-sort="network_device_type">Devtype(s)</th>
                    <th colspan="3" class="text-center">Actions</th>
                </tr>
            </thead>

            <tbody>
                <tr ng-repeat="obj in entries_displayed">
                    <td>{{ obj.identifier }}</td>
                    <td ng-show="show_column.network" style="font-family:monospace;">
                        <span class="ip_address" ng-bind-html="obj.network | ip_fixed_width"></span> /
                        <span class="ip_address" ng-bind-html="obj.netmask | ip_fixed_width"></span> /
                        <span class="ip_address" ng-bind-html="obj.broadcast | ip_fixed_width"></span>
                    </td>
                    <td ng-show="show_column.gateway" style="font-family:monospace;">
                        <span class="ip_address" ng-bind-html="obj.gateway | ip_fixed_width"></span>
                    </td>
                    <td ng-show="show_column.gateway" class="text-center">
                        <span class="badge">{{ obj.gw_pri }}</span>
                    </td>
                    <td ng-show="show_column.autorange" style="font-family:monospace;">
                        <span ng-switch="config_service.autorange_set(obj)">
                            <span ng-switch-when="true">
                                <span class="ip_address" ng-bind-html="obj.start_range | ip_fixed_width"></span> -
                                <span class="ip_address" ng-bind-html="obj.end_range | ip_fixed_width"></span>
                            </span>
                            <span ng-switch-default>
                                ----
                            </span>
                        </span>
                    </td>
                    <td class="text-right">{{ obj.num_ip }}</td>
                    <td class="text-center">{{ obj.penalty }}</td>
                    <td class="text-center"><span ng-bind-html="obj.enforce_unique_ips | yesno3"></span></td>
                    <td>
                        {{ config_service.nw_tree().nw_type_lut[obj.network_type].description }}
                    </td>
                    <td class="text-center">
                        {{ config_service.get_master_network_id(obj) }}
                    </td>
                    <td ng-show="show_column.prefDTN" class="text-center">
                        {{ config_service.preferred_dtn(obj) }}
                    </td>
                    <td class="text-center">
                        {{ config_service.get_network_device_types(obj) }}
                    </td>
                    <td>
                        <icsw-tools-button type="modify" size="xs" ng-click="edit($event, obj)"/>
                    </td>
                    <td>
                        <icsw-tools-button
                            type="delete"
                            ng-show="obj.num_ip == 0"
                            ng-click="delete($event, obj)"
                            size="xs"
                        ></icsw-tools-button>
                    </td>
                    <td>
                        <icsw-tools-button
                            type="create"
                            size="xs"
                            ng-click="config_service.create_new_detail_view_tab(obj)"
                            value="Show Details"
                        ></icsw-tools-button>
                    </td>
                </tr>
            </tbody>
        </table>
    </icsw-tools-rest-table-new>
</script>

<script type="text/ng-template" id="network.device.type.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Base Data</legend>
            <div class="form-group ng-class:form_error('identifier')">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Identifier<span class="asteriskField">*</span></label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control maxwidth500" maxlength="48" ng-model="edit_obj.identifier" placeholder="Identifier" required="True" type="text"/>
                </div>
            </div>
            <div class="form-group ng-class:form_error('description')">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Description<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control maxwidth500" maxlength="192" ng-model="edit_obj.description" placeholder="Description" required="True" type="text"/>
                </div>
            </div>
            <div class="form-group ng-class:form_error('name_re')">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Name Regexp<span class="asteriskField">*</span></label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control maxwidth500" maxlength="128" ng-model="edit_obj.name_re" placeholder="Regular expression" required="True" type="text" value="^.*$"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    #MAC Bytes<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <input class="numberinput form-control maxwidth500" max="24" min="6" ng-model="edit_obj.mac_bytes" placeholder="MAC bytes" required="True" type="number" value="6"/>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend>Flags</legend>
            <div class="form-group row">
                <div class="col-sm-5 icsw-formlabel">
                    <label>
                        Allow Virtual Interfaces
                    </label>
                </div>
                <div class="controls col-sm-7">
                    <icsw-tools-yes-no flag="edit_obj.allow_virtual_interfaces"></icsw-tools-yes-no>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-5 icsw-formlabel">
                    <label>
                        Used for matching
                    </label>
                </div>
                <div class="controls col-sm-7">
                    <icsw-tools-yes-no flag="edit_obj.for_matching"></icsw-tools-yes-no>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<script type="text/ng-template" id="icsw.netdevice.form">
    <form class="form-horizontal" name="form_data">
        <uib-tabset>
            <uib-tab heading="Basic settings">
                <fieldset style="margin-top:15px;">
                    <div class="form-group ng-class:form_error('devname')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Devname<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="64" ng-model="edit_obj.devname" placeholder="devicename" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Description
                        </label>
                        <div class="controls col-sm-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="765" ng-model="edit_obj.description" type="text"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            MTU<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-8">
                            <input class="numberinput form-control maxwidth500" ng-model="edit_obj.mtu" required="True" type="number" value="1500"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Netdevice speed
                        </label>
                        <div class="controls col-sm-8">
                            <ui-select ng-model="edit_obj.netdevice_speed" class="maxwidth500" ng-disabled="false">
                                <ui-select-match class="ui-select-match" placeholder="select a target netdevice speed">{{$select.selected.info_string}}</ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.network_tree.nw_speed_list">
                                    <div ng-bind-html="value.info_string | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="control-label col-sm-3 icsw-formlabel">
                            <label>
                                Ignore netdevice speed
                            </label>
                        </div>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.ignore_netdevice_speed"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="control-label col-sm-3 icsw-formlabel">
                            <label>
                                Enabled
                            </label>
                        </div>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.enabled"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Desired status
                        </label>
                        <div class="controls col-sm-9">
                            <ui-select ng-model="edit_obj.desired_status" class="maxwidth500" ng-disabled="false">
                                <ui-select-match class="ui-select-match" placeholder="select the desired status">{{$select.selected.info_string}}</ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.short as value in desired_stati">
                                    <div ng-bind-html="value.info_string | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Routing Settings</legend>
                    <div class="form-group row">
                        <div class="control-label col-sm-3 icsw-formlabel">
                            <label>
                                Network Topology Central Node
                            </label>
                        </div>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.routing"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Penalty
                        </label>
                        <div class="controls col-sm-9">
                            <input class="numberinput form-control maxwidth500" max="128" min="1" name="penalty" ng-model="edit_obj.penalty" type="number" value="1"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="control-label col-sm-3 icsw-formlabel">
                            <label>
                                Inter Device Routing
                            </label>
                        </div>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.inter_device_routing"></icsw-tools-yes-no>
                        </div>
                    </div>
                </fieldset>
                <fieldset ng-show="!edit_obj.is_bridge && !edit_obj.is_bond && !edit_obj.bond_master && !edit_obj.bridge_device && get_vlan_masters(edit_obj).length">
                    <legend>VLAN Settings</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Master Device
                        </label>
                        <div class="controls col-sm-8">
                            <div class="input-group maxwidth500">
                                <ui-select ng-model="_dit_obj.master_device" ng-disabled="false">
                                    <ui-select-match class="ui-select-match" placeholder="VLAN master device">{{$select.selected.devname}}</ui-select-match>
                                    <ui-select-choices class="ui-select-choices" repeat="value.idx as value in get_vlan_masters(edit_obj)">
                                        <div ng-bind-html="value.devname | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.master_device = undefined" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            VLAN ID
                        </label>
                        <div class="controls col-sm-8">
                            <input class="numberinput form-control maxwidth500" max="255" min="0" ng-model="edit_obj.vlan_id" type="number" value="0"/>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab heading="Bridge / Bond" ng-show="!edit_obj.vlan_id">
                <fieldset ng-show="!edit_obj.vlan_id && !edit_obj.bond_master && !edit_obj.is_bond">
                    <legend>Bridge Settings</legend>
                    <div class="form-group row">
                        <label class="control-label col-sm-3">
                            Is Bridge Device
                        </label>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.is_bridge" ng-disabled="has_bridge_slaves(edit_obj)"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group" ng_show="!edit_obj.is_bridge && get_bridge_masters(edit_obj).length">
                        <label class="control-label col-sm-3">
                            Bridge Device
                        </label>
                        <div class="controls col-sm-8">
                            <div class="input-group" style="max-width:400px; min-width:240px;">
                                <ui-select ng-model="edit_obj.bridge_device" style="max-width:400px; min-width:240px;" ng-disabled="false">
                                    <ui-select-match class="ui-select-match" placeholder="bridge master device">{{ $select.selected.devname }}</ui-select-match>
                                    <ui-select-choices class="ui-select-choices" repeat="value.idx as value in get_bridge_masters(edit_obj)">
                                        <div ng-bind-html="value.devname | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.bridge_device = null" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset ng-show="!edit_obj.vlan_id && !edit_obj.bridge_device && !edit_obj.is_bridge">
                    <legend>Bond Settings</legend>
                    <div class="form-group row">
                        <label class="control-label col-sm-3">
                            Is Bond Master
                        </label>
                        <div class="controls col-sm-9">
                            <icsw-tools-yes-no flag="edit_obj.is_bond" ng-disabled="has_bond_slaves(edit_obj)"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group" ng_show="!edit_obj.is_bond && get_bond_masters(edit_obj).length">
                        <label class="control-label col-sm-3">
                            Bond Master
                        </label>
                        <div class="controls col-sm-8">
                            <div class="input-group" style="max-width:400px; min-width:240px;">
                                <ui-select ng-model="edit_obj.bond_master" style="max-width:400px; min-width:240px;" ng-disabled="false">
                                    <ui-select-match class="ui-select-match" placeholder="bond master device">{{ $select.selected.devname }}</ui-select-match>
                                    <ui-select-choices class="ui-select-choices" repeat="value.idx as value in get_bond_masters(edit_obj)">
                                        <div ng-bind-html="value.devname | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.bond_master = undefined" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab heading="Hardware">
                <fieldset style="margin-top:15px;">
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Driver
                        </label>
                        <div class="controls col-sm-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="384" ng-model="edit_obj.driver" type="text" value="e1000e"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Driver Options
                        </label>
                        <div class="controls col-sm-8">
                            <input class="textinput textInput form-control maxwidth500" maxlength="672" ng-model="edit_obj.driver_options" type="text"/>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Ethtool Settings (for Cluster Boot)</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Ethtool Autonegotiation<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-8">
                            <select class="select form-control maxwidth500" ng-change="update_ethtool(edit_obj)" ng-model="edit_obj.ethtool_autoneg" ng-options="a.id as a.option for a in ethtool_autoneg">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Ethtool Duplex<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-8">
                            <select class="select form-control maxwidth500" ng-change="update_ethtool(edit_obj)" ng-model="edit_obj.ethtool_duplex" ng-options="a.id as a.option for a in ethtool_duplex">
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Ethtool Speed<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-8">
                            <select class="select form-control maxwidth500" ng-change="update_ethtool(edit_obj)" ng-model="edit_obj.ethtool_speed" ng-options="a.id as a.option for a in ethtool_speed">
                            </select>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>MAC Address Settings</legend>
                    <div class="row">
                        <div class="col-md-6" style="width:390px;">
                            <div class="form-group">
                                <label class="control-label col-sm-3" style="text-align:left;width:120px;">
                                    MAC-Address
                                </label>
                                <div class="controls col-sm-8" style="width:240px;">
                                    <input class="textinput textInput form-control" maxlength="177" name="macaddr" ng-model="edit_obj.macaddr" type="text"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-sm-3" style="text-align:left;width:150px;">
                                    Fake MAC-Address
                                </label>
                                <div class="controls col-sm-8" style="width:240px;">
                                    <input class="textinput textInput form-control" maxlength="177" name="fake_macaddr" ng-model="edit_obj.fake_macaddr" type="text"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="control-label col-sm-9">
                            force write DHCP address (greedy mode will not work)
                        </label>
                        <div class="controls col-sm-3">
                            <icsw-tools-yes-no flag="edit_obj.dhcp_device"></icsw-tools-yes-no>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
        </uib-tabset>
    </form>
</script>

<script type="text/ng-template" id="network.form">
    <form class="form-horizontal" name="form_data">
        <uib-tabset>
            <uib-tab heading="Base Data">
                <fieldset>
                    <legend>Base Data</legend>
                    <div class="form-group ng-class:form_error('identifier')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Identifier<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control maxwidth500" maxlength="255" name="identifier" ng-model="edit_obj.identifier" placeholder="Identifier" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group  ng-class:form_error('network')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Network<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control maxwidth500" name="network" ng-blur="config_service.network_or_netmask_blur(edit_obj)" ng-model="edit_obj.network" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Network" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group  ng-class:form_error('netmask')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Netmask<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control maxwidth500" name="netmask" ng-blur="config_service.network_or_netmask_blur(edit_obj)" ng-model="edit_obj.netmask" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Netmask" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group  ng-class:form_error('broadcast')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Broadcast<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control maxwidth500" name="broadcast" ng-model="edit_obj.broadcast" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Broadcast" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group  ng-class:form_error('gateway')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Gateway<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control maxwidth500" name="gateway" ng-model="edit_obj.gateway" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Gateway" required="True" type="text"/>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Network Type (Master / Worker)</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Network Type<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <ui-select ng-model="edit_obj.network_type" class=" maxwidth500" ng-disabled="config_service.has_master_network(edit_obj)">
                                <ui-select-match class="ui-select-match" placeholder="network type">{{$select.selected.description}}</ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in config_service.nw_tree().nw_type_list | props_filter:{description:$select.search}">
                                    <div ng-bind-html="value.description | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                    <div class="form-group" ng_show="config_service.is_slave_network(edit_obj.network_type)">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Master Network
                        </label>
                        <div class="controls col-sm-7">
                            <div class="input-group maxwidth500">
                                <ui-select ng-model="edit_obj.master_network" ng-disabled="false">
                                    <ui-select-match class="ui-select-match" placeholder="master network">{{$select.selected.identifier}}
                                    </ui-select-match>
                                    <ui-select-choices class="ui-select-choices" repeat="value.idx as value in config_service.get_production_networks()| props_filter:{identifier:$select.search}">
                                        <div ng-bind-html="value.identifier | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.master_network = null" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab heading="Flags / Range">
                <fieldset>
                    <legend>Flags and Priority</legend>
                    <div class="form-group row">
                        <div class="col-sm-3 icsw-formlabel">
                            <label>
                                Enforce Unique IP Addresses
                            </label>
                        </div>
                        <div class="controls col-sm-7">
                            <icsw-tools-yes-no flag="edit_obj.enforce_unique_ips"></icsw-tools-yes-no>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Gateway Priority
                        </label>
                        <div class="controls col-sm-7">
                            <input class="numberinput form-control maxwidth500" name="gw_pri" ng-model="edit_obj.gw_pri" type="number" value="1"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Preferred Domain Tree Node
                        </label>
                        <div class="controls col-sm-7">
                            <div class="input-group maxwidth500">
                                <ui-select ng-model="edit_obj.preferred_domain_tree_node">
                                    <ui-select-match class="ui-select-match" placeholder="preferred DTN">{{ $select.selected.full_name }}</ui-select-match>
                                    <ui-select-choices
                                        repeat="value.idx as value in config_service.domain_tree().list | props_filter:{full_name:$select.search}"
                                    >
                                        <div ng-bind-html="value.full_name | highlight: $select.search"></div>
                                    </ui-select-choices>
                                </ui-select>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="edit_obj.preferred_domain_tree_node = undefined" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 icsw-formlabel">
                            Network Device Type
                        </label>
                        <div class="controls col-sm-7">
                            <ui-select multiple="multiple" ng-model="edit_obj.network_device_type" class="maxwidth500" ng-disabled="false">
                                <ui-select-match class="ui-select-match" placeholder="network device types">{{$item.identifier}}</ui-select-match>
                                <ui-select-choices class="ui-select-choices" repeat="value.idx as value in config_service.nw_tree().nw_device_type_list | props_filter:{identifier:$select.search}">
                                    <div ng-bind-html="value.identifier | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Range</legend>
                    <div class="form-group ng-class:form_error('start_range')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Range Start (incl.)
                        </label>
                        <div class="controls col-sm-7">
                            <div class="input-group maxwidth500">
                                <input class="textinput textInput form-control" ng-focus="config_service.enter_range(edit_obj)" ng-blur="config_service.range_check(edit_obj)" ng-model="edit_obj.start_range" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Range start"  type="text"/>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="config_service.clear_range(edit_obj)" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group ng-class:form_error('end_range')">
                        <label class="control-label col-sm-3 requiredField icsw-formlabel">
                            Range End (incl.)
                        </label>
                        <div class="controls col-sm-7">
                            <div class="input-group maxwidth500">
                                <input class="textinput textInput form-control" ng-focus="config_service.enter_range(edit_obj)" ng-blur="config_service.range_check(edit_obj)" ng-model="edit_obj.end_range" ng-pattern="/^\d+\.\d+\.\d+\.\d+$/" placeholder="Range end" type="text"/>
                                <span class="input-group-btn">
                                    <button type="button" ng-click="config_service.clear_range(edit_obj)" class="btn btn-default">
                                        <span class="glyphicon glyphicon-trash"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab heading="Host Discovery">
                <legend>Scan Settings</legend>
                <div ng-if="device_list.length > 0" class="form-group">
                    <label class="control-label col-sm-3 requiredField icsw-formlabel">
                        Dispatcher(s)
                    </label>
                    <div class="controls col-sm-7">
                        <ui-select multiple="multiple" ng-model="edit_obj.$$dispatchers" class="maxwidth500">
                            <ui-select-match class="ui-select-match" placeholder="Select dispatcher (how often to perform scan)">
                                {{ $item.name }}
                            </ui-select-match>
                            <ui-select-choices class="ui-select-choices" repeat="value.idx as value in dispatcher_tree.list | props_filter:{name:$select.search}">
                                <div ng-bind-html="value.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div ng-if="device_list.length > 0" class="form-group">
                    <label class="control-label col-sm-3 requiredField icsw-formlabel">
                        Scan Device
                    </label>
                    <div class="controls col-sm-7">
                        <ui-select ng-model="edit_obj.$$scan_device" class="maxwidth500">
                            <ui-select-match class="ui-select-match" placeholder="Select device to perform scan on">
                                {{ $select.selected.full_name }}
                            </ui-select-match>
                            <ui-select-choices class="ui-select-choices" repeat="value.idx as value in device_list | props_filter:{full_name:$select.search}">
                                <div ng-bind-html="value.full_name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div ng-if="device_list.length == 0">No nmap-scan-device(s) configured!</div>
            </uib-tab>
        </uib-tabset>
    </form>
</script>

<script type="text/ng-template" id="network.type.form">
    <form id="form" class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Base Data</legend>
            <div class="form-group  ng-class:form_error('description')">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Description<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <input class="textinput textInput form-control maxwidth500" maxlength="192" ng-model="edit_obj.description" placeholder="Description" required="True" type="text"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3 requiredField icsw-formlabel">
                    Identifier<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-7">
                    <ui-select ng-model="edit_obj.identifier" class="maxwidth500" ng-disabled="false">
                        <ui-select-match class="ui-select-match" placeholder="network type type">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.value as value in config_service.network_types">
                            <div ng-bind-html="value.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<script type="text/ng-template" id="icsw.net.ip.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Basic settings</legend>
            <div class="form-group">
                <label class="control-label col-sm-4 requiredField icsw-formlabel">
                    Netdevice<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-8">
                    <ui-select ng-model="edit_obj.netdevice" class="maxwidth500" ng-disabled="!create_mode">-->
                        <ui-select-match class="ui-select-match" placeholder="netdevice">{{$select.selected.devname}}</ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in device.netdevice_set">
                            <div ng-bind-html="value.devname | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 requiredField icsw-formlabel">
                    Network<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-8">
                    <ui-select ng-model="edit_obj.network" ng-change="network_changed(edit_obj)" class="maxwidth500" ng-disabled="false">
                        <ui-select-match class="ui-select-match" placeholder="network">{{$select.selected.$$info_string}}</ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.network_tree.nw_list | props_filter:{info_string:$select.search}" position="down">
                            <div ng-bind-html="value.$$info_string | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group row"  ng-class="form_error('devname')">
                <label class="control-label col-sm-4 requiredField icsw-formlabel">
                    IP Address<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-2">
                    <icsw-tools-button
                        type="create"
                        value="Get free IP"
                        icsw-disabled="!struct.network_tree.nw_lut[edit_obj.network].$$range_ok"
                        size="sm"
                        ng-click="get_free_ip($event, edit_obj)"

                    ></icsw-tools-button>
                </div>
                <div class="controls col-sm-5">
                    <input class="textinput textInput form-control maxwidth500" maxlength="16" name="ip" ng-model="edit_obj.ip" placeholder="IP Address" required="True" type="text" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 requiredField icsw-formlabel">
                    Domain Tree Node<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-8">
                    <ui-select ng-model="edit_obj.domain_tree_node" class="maxwidth500" ng-disabled="false">
                        <ui-select-match class="ui-select-match" placeholder="Domain tree node">{{$select.selected.tree_info}}</ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in struct.domain_tree.list | props_filter:{tree_info:$select.search}">
                            <div ng-bind-html="value.tree_info | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend>Alias settings (will be written without node postfixes)</legend>
            <div class="form-group row">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Alias
                </label>
                <div class="controls col-sm-8">
                    <input class="textinput textInput form-control maxwidth500" maxlength="765" name="alias" ng-model="edit_obj.alias" type="text"/>
                </div>
            </div>
            <div class="form-group row">
                <label class="control-label col-sm-4">
                    Alias is exclusive
                </label>
                <div class="controls col-sm-8">
                    <icsw-tools-yes-no flag="edit_obj.alias_excl"></icsw-tools-yes-no>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<script type="text/ng-template" id="icsw.peer.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Network topology connection (peer)</legend>
            <div class="form-group">
                <label class="control-label col-sm-4 requiredField icsw-formlabel">
                    Cost<span class="asteriskField">*</span>
                </label>
                <div class="controls col-sm-8">
                    <input class="numberinput form-control maxwidth500" max="128" min="1" name="penalty" ng-model="edit_obj.penalty" required="True" type="number" value="0"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Source
                </label>

                <div class="col-sm-8">
                    <ui-select ng-model="edit_obj.s_netdevice" class="maxwidth500">
                        <ui-select-match class="ui-select-match" placeholder="select a netdevice">
                            {{ $select.selected.info_string }}
                        </ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in source_helper.list | props_filter:{info_string:$select.search}" group-by="'device_group_name'">
                            <div ng-bind-html="value.info_string | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Destination
                </label>
                <div class="col-sm-8">
                    <ui-select ng-model="edit_obj.d_netdevice" class="maxwidth500">
                        <ui-select-match class="ui-select-match" placeholder="select a target device">
                            {{$select.selected.info_string}}
                        </ui-select-match>
                        <ui-select-choices class="ui-select-choices" repeat="value.idx as value in dest_helper.list | props_filter:{info_string:$select.search}" group-by="'device_group_name'">
                            <div ng-bind-html="value.info_string | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div id="div_id_s_spec" class="form-group">
                <label for="id_s_spec" class="control-label col-sm-4 icsw-formlabel">
                    Source Specification
                </label>
                <div class="controls col-sm-8">
                    <input class="textinput textInput form-control maxwidth500" maxlength="128" name="s_spec" ng-model="edit_obj.s_spec" type="text"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Destination specification
                </label>
                <div class="controls col-sm-8">
                    <input class="textinput textInput form-control maxwidth500" maxlength="128" name="d_spec" ng-model="edit_obj.d_spec" type="text"/>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Information
                </label>
                <div class="controls col-sm-8">
                    <input class="textinput textInput form-control maxwidth500" maxlength="256" name="info" ng-model="edit_obj.info" type="text"/>
                </div>
            </div>
            <div class="form-group" ng-if="!create_mode">
                <label class="control-label col-sm-4 icsw-formlabel">
                    Creation Information
                </label>
                <div class="col-sm-8">
                    <span ng-show="edit_obj.autocreated" class="label label-warning">Automatically Created</span>
                    <span ng-show="!edit_obj.autocreated" class="label label-success">Manually Created</span>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<script type="text/ng-template" id="icsw.device.network.scan.form">
    <form class="form-horizontal" name="form_data">
        <fieldset>
            <legend>Scan address, {{ _current_dev.ip_list.length }} non-local IPs defined</legend>
            <div>
                <ul class="list-group">
                    <li class="list-group-item" ng-repeat="name in network_type_names">
                        {{ name }}:
                        <input ng-repeat="ip in ip_dict[name]" type="button" class="btn btn-sm btn-primary" value="{{ ip }}" ng-click="set_ip(ip)"></input>
                    </li>
                    <li class="list-group-item">
                        IP: <input ng-model="scan_settings.manual_address" class="form-control form-control-inline" />
                    </li>
                </ul>
            </div>
        </fieldset>
        <uib-tabset>
            <uib-tab heading="BaseScan" select='set_scan_mode("base")' active="active_scan['base']">
                <h3>
                    Scan device for Communication capabilities
                </h3>
            </uib-tab>
            <uib-tab ng-if='has_com_capability("hm")' heading="Hostmonitor" select='set_scan_mode("hm")' active="active_scan['hm']">
                <fieldset>
                    <legend>Flags</legend>
                    <div class="form-group">
                        <div class="checkbox">
                            <div class="controls col-lg-offset-0 col-sm-7">
                                <label>
                                    <input class="checkboxinput checkbox" ng-model="scan_settings.strict_mode" type="checkbox"/>
                                    all netdevices must be recognizable and all existing peers must be conserverd
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group checkbox">
                        <div class="controls col-lg-offset-0 col-sm-7">
                            <label>
                                <input class="checkboxinput checkbox" ng-model="scan_settings.modify_peering" type="checkbox"/>
                                Modify peering (dangerous)
                            </label>
                        </div>
                    </div>
                    <div class="alert alert-danger" ng-show="!scan_settings.strict_mode && scan_settings.modify_peering">
                        attention: peers might get lost
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab ng-if='has_com_capability("snmp")' heading="SNMP" select='set_scan_mode("snmp")' active="active_scan['snmp']">
                <fieldset>
                    <legend>SNMP Scan Settings</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField">
                            SNMP community<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control" maxlength="128" ng-model="scan_settings.snmp_community" required="True" type="text"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3 requiredField">
                            SNMP version<span class="asteriskField">*</span>
                        </label>
                        <div class="controls col-sm-7">
                            <select class="select form-control" ng-model="scan_settings.snmp_version" required="True">
                                <option value="1">1</option>
                                <option value="2c">2c</option>
                            </select>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Flags</legend>
                    <div class="form-group">
                        <div class="checkbox">
                            <div class="controls col-lg-offset-0 col-sm-7">
                                <label>
                                    <input class="checkboxinput checkbox" ng-model="scan_settings.remove_not_found" type="checkbox"/>
                                    Remove not found
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group checkbox">
                        <div class="controls col-lg-offset-0 col-sm-7">
                            <label>
                                <input class="checkboxinput checkbox" ng-model="scan_settings.modify_peering" type="checkbox"/>
                                Modify peering (dangerous)
                            </label>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
            <uib-tab ng-if='has_com_capability("wmi")' heading="WMI" select='set_scan_mode("wmi")' active="active_scan['wmi']">
                <fieldset>
                    <legend>WMI Scan Settings</legend>
                    <div class="form-group">
                        <label class="control-label col-sm-3">
                            Username
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control" maxlength="256" ng-model="scan_settings.wmi_username" type="text"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-3">
                            Password
                        </label>
                        <div class="controls col-sm-7">
                            <input class="textinput textInput form-control" maxlength="256" ng-model="scan_settings.wmi_password" type="password"/>
                        </div>
                    </div>
                    <div class="form-group checkbox">
                        <div class="controls col-lg-offset-0 col-sm-7">
                            <label>
                                <input class="checkboxinput checkbox" ng-model="scan_settings.wmi_discard_disabled_interfaces" type="checkbox"/>
                                Ignore disabled interfaces
                            </label>
                        </div>
                    </div>
                    <div class="form-group checkbox">
                        <div class="controls col-lg-offset-0 col-sm-7">
                            <label>
                                <input class="checkboxinput checkbox" ng-model="scan_settings.modify_peering" type="checkbox"/>
                                Modify peering (dangerous)
                            </label>
                        </div>
                    </div>
                </fieldset>
            </uib-tab>
        </uib-tabset>
        <div uib-alert class="alert-warning" ng-show="!scan_settings.manual_address">
            Please enter or select an IP address
        </div>
    </form>
</script>
